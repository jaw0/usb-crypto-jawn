#!/usr/local/bin/perl
# -*- perl -*-

# Copyright (c) 2018
# Author: Jeff Weisberg <jaw @ tcp4me.com>
# Created: 2018-Sep-04 15:37 (EDT)
# Function: create help data

use strict;

# make msdos disk image of help files
system("mformat -i help.image -h 1 -t 2 -s 8 -C -d 1 -r 1 -v HelpDocs");
system("mcopy -i help.image help.txt ::");
# more files?

# convert image into C
open(F, '<', 'help.image') || die;
open(H, '>', 'help.c' ) || die;

print H "// autogenerated - do not edit\n";
print H "const char romdisk_image[8192] = {\n";

my $n = 0;

while(1){
    my $c;

    my $r = read(F, $c, 1);
    last unless $r;

    printf H "0x%x, ", ord($c);

    print H "\n" unless ++$n % 20;

}

print H "};\n";

